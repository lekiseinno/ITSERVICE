!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.sortable=t()}(this,function(){"use strict";var e,t,n=[],r=[],a=function(e,t,n){if(void 0===n)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n},i=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)},o=function(e,t){if(!t)return Array.prototype.slice.call(e);for(var n=[],r=0;r<e.length;++r)"string"==typeof t&&i(e[r],t)&&n.push(e[r]),-1!==t.indexOf(e[r])&&n.push(e[r]);return n},s=function(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)s(e[r],t,n);else e.addEventListener(t,n),e.h5s=e.h5s||{},e.h5s.events=e.h5s.events||{},e.h5s.events[t]=n},l=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)l(e[n],t);else e.h5s&&e.h5s.events&&e.h5s.events[t]&&(e.removeEventListener(t,e.h5s.events[t]),delete e.h5s.events[t])},d=function(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)d(e[r],t,n);else e.setAttribute(t,n)},c=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)c(e[n],t);else e.removeAttribute(t)},f=function(e){var t=e.getClientRects()[0];return{left:t.left+window.scrollX,top:t.top+window.scrollY}},u=function(e){l(e,"dragstart"),l(e,"dragend"),l(e,"selectstart"),l(e,"dragover"),l(e,"dragenter"),l(e,"drop")},p=function(e){l(e,"dragover"),l(e,"dragenter"),l(e,"drop")},h=function(e,t){var n,r,a,i,o={draggedItem:t};n=e,(r=o).x||(r.x=parseInt(n.pageX-f(r.draggedItem).left)),r.y||(r.y=parseInt(n.pageY-f(r.draggedItem).top)),i=o=r,(a=e).dataTransfer.effectAllowed="move",a.dataTransfer.setData("text","arbitrary-content"),a.dataTransfer.setDragImage&&a.dataTransfer.setDragImage(i.draggedItem,i.x,i.y)},g=function(e,t){return e===t||void 0!==a(e,"connectWith")&&a(e,"connectWith")===a(t,"connectWith")},m=function(e,t){var n,r=[];if(!t)return e;for(var a=0;a<e.length;++a)n=e[a].querySelectorAll(t),r=r.concat(Array.prototype.slice.call(n));return r},v=function(e){var t,n,r,i=a(e,"opts")||{},s=o(A(e),i.items),d=m(s,i.handle);p(e),(n=t=e).h5s&&delete n.h5s.data,c(t,"aria-dropeffect"),l(d,"mousedown"),u(s),c(r=s,"aria-grabbed"),c(r,"draggable"),c(r,"role")},y=function(e){var t=a(e,"opts"),n=o(A(e),t.items),r=m(n,t.handle);d(e,"aria-dropeffect","move"),a(e,"_disabled","false"),d(r,"draggable","true"),"function"!=typeof(document||window.document).createElement("span").dragDrop||t.disableIEFix||s(r,"mousedown",function(){if(-1!==n.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===n.indexOf(e);)e=e.parentElement;e.dragDrop()}})},b=function(e){return e.parentElement?Array.prototype.indexOf.call(e.parentElement.children,e):0},E=function(e){return!!e.parentNode},x=function(e,t){e.parentElement.insertBefore(t,e.nextElementSibling)},w=function(e){e.parentNode&&e.parentNode.removeChild(e)},I=function(e,t){var n=document.createEvent("Event");return t&&(n.detail=t),n.initEvent(e,!1,!0),n},C=function(e,t){r.forEach(function(n){g(e,n)&&n.dispatchEvent(t)})};var A=function(e){return e.children},S=function(e){return o(A(e),a(e,"items"))},D=function(c,v){var L=String(v);if((v=function(e){var t={connectWith:!1,placeholder:null,disableIEFix:!1,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,maxItems:0};for(var n in e)t[n]=e[n];return t}(v))&&"function"==typeof v.getChildren&&(A=v.getChildren),"string"==typeof c&&(c=document.querySelectorAll(c)),c instanceof window.Element&&(c=[c]),c=Array.prototype.slice.call(c),/serialize/.test(L)){var O=[];return c.forEach(function(e){O.push({list:e,children:S(e)})}),O}return c.forEach(function(c){if(/enable|disable|destroy/.test(L))return D[L](c);var O,T,W,M;v=a(c,"opts")||v,a(c,"opts",v),T=a(O=c,"opts"),W=o(A(O),T.items),M=m(W,T.handle),a(O,"_disabled","false"),u(W),l(M,"mousedown"),p(O);var N,P,_,z,Y=o(A(c),v.items),q=v.placeholder;if(q||(q=document.createElement(/^ul|ol$/i.test(c.tagName)?"li":"div")),(q=function(e,t){if("string"!=typeof e)return e;var n=document.createElement(t);return n.innerHTML=e,n.firstChild}(q,c.tagName)).classList.add.apply(q.classList,v.placeholderClass.split(" ")),!c.getAttribute("data-sortable-id")){var B=r.length;r[B]=c,d(c,"data-sortable-id",B),d(Y,"data-item-sortable-id",B)}if(a(c,"items",v.items),n.push(q),v.connectWith&&a(c,"connectWith",v.connectWith),y(c),d(Y,"role","option"),d(Y,"aria-grabbed","false"),v.hoverClass){var F="sortable-over";"string"==typeof v.hoverClass&&(F=v.hoverClass),s(Y,"mouseenter",function(){this.classList.add(F)}),s(Y,"mouseleave",function(){this.classList.remove(F)})}v.maxItems&&"number"==typeof v.maxItems&&(z=v.maxItems),s(Y,"dragstart",function(n){n.stopImmediatePropagation(),v.handle&&!i(n.target,v.handle)||"false"===this.getAttribute("draggable")||(h(n,this),this.classList.add(v.draggingClass),d(e=this,"aria-grabbed","true"),N=b(e),t=parseInt(window.getComputedStyle(e).height),P=this.parentElement,_=S(P),C(c,I("sortstart",{item:e,placeholder:q,startparent:P})))}),s(Y,"dragend",function(){var r;e&&(e.classList.remove(v.draggingClass),d(e,"aria-grabbed","false"),e.style.display=e.oldDisplay,delete e.oldDisplay,n.forEach(w),r=this.parentElement,C(c,I("sortstop",{item:e,startparent:P})),N===b(e)&&P===r||C(c,I("sortupdate",{item:e,index:o(A(r),a(r,"items")).indexOf(e),oldindex:Y.indexOf(e),elementIndex:b(e),oldElementIndex:N,startparent:P,endparent:r,newEndList:S(r),newStartList:S(P),oldStartList:_})),e=null,t=null)}),s([c,q],"drop",function(t){var r;g(c,e.parentElement)&&(t.preventDefault(),t.stopPropagation(),r=n.filter(E)[0],x(r,e),e.dispatchEvent(I("dragend")))});var X,j,k,H,R=(X=function(r,a){var i,s;if(e)if(-1!==Y.indexOf(r)){var l=parseInt(window.getComputedStyle(r).height),d=b(q),c=b(r);if(v.forcePlaceholderSize&&(q.style.height=t+"px"),l>t){var u=l-t,p=f(r).top;if(d<c&&a<p+u)return;if(d>c&&a>p+l-u)return}void 0===e.oldDisplay&&(e.oldDisplay=e.style.display),"none"!==e.style.display&&(e.style.display="none"),d<c?x(r,q):(s=q,(i=r).parentElement.insertBefore(s,i)),n.filter(function(e){return e!==q}).forEach(w)}else-1!==n.indexOf(r)||o(A(r),v.items).length||(n.forEach(w),r.appendChild(q))},j=v.debounce,H=null,0===j?X:function(){var e=k||this,t=arguments;clearTimeout(H),H=setTimeout(function(){X.apply(e,t)},j)}),$=function(t){e&&g(c,e.parentElement)&&"true"!==a(c,"_disabled")&&(z&&o(A(c),a(c,"items")).length>=z||(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect="move",R(this,t.pageY)))};s(Y.concat(c),"dragover",$),s(Y.concat(c),"dragenter",$)}),c};return D.destroy=function(e){v(e)},D.enable=function(e){y(e)},D.disable=function(e){var t,n,r,i;n=a(t=e,"opts"),r=o(A(t),n.items),i=m(r,n.handle),d(t,"aria-dropeffect","none"),a(t,"_disabled","true"),d(i,"draggable","false"),l(i,"mousedown")},D});